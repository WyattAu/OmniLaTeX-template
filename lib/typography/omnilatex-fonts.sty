%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% OmniLaTeX Typography Module - Fonts
%
% Font configuration and loading
% Part of OmniLaTeX-template modular architecture
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{lib/typography/omnilatex-fonts}[2024-10-11 v6.0.0 OmniLaTeX fonts module]

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Font Configuration for LuaLaTeX
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\RequirePackage{fontspec}
\RequirePackage{fix-cm}% Computer Modern fixes

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Math Fonts (load before font setup)
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\RequirePackage{amsmath}
\RequirePackage{lualatex-math}
\RequirePackage[
    warnings-off={
            % Unicode overwrites colon-commands but uses over/underbracket from mathtools
            % and warns us; suppress this:
            mathtools-colon,%
            mathtools-overbracket,%
        }
]{unicode-math}% Builds onto fontspec and loads it automatically

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Fonts shipped with TeXLive
% Source: https://tug.org/FontCatalogue/
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Main font: Libertinus Serif (replacing TeX Gyre Pagella)
\setmainfont[
    Numbers=Lowercase,% Hanging/OldStyle numbers through Lowercase numbers
    % Proper scaling for consistent appearance with other fonts
    Scale=MatchLowercase,
]{Libertinus Serif}

% Monospace font: Monaspace Neon (replacing Inconsolata)
% Source: https://github.com/chriskapp/neon-monospace
\setmonofont[
    % Monaspace Neon has proper italics support
    Scale=MatchLowercase,% Prettier when using inline-code alongside our main font
]{Monaspace Neon}

% Sans font: Merriweather Sans
% Source: https://tug.org/FontCatalogue/merriweathersans/
% Note: Previously used FiraSans due to LuaLaTeX issues, but these are now fixed
\setsansfont{MerriweatherSans}

% Math font: Libertinus Math (replacing TeX Gyre Pagella Math)
% Source: https://github.com/alif-type/libertinus
\setmathfont[
    %Set math-font-commands to new versions; use \symbf{} instead of \mathbf{} etc:
    mathrm=sym,%
    mathit=sym,%
    mathsf=sym,%
    mathbf=sym,%
    mathtt=sym,%
    % 'libertinus': 'LibertinusSerif' NFSS family.
    % This 'NFSS' style is required for \fontfamily{nfss-code}\selectfont to work,
    % e.g. in package chemmacros/chemformula
    NFSSFamily=libertinus,%
]{Libertinus Math}

% Provide a new font family for siunitx to work.
% See: https://tex.stackexchange.com/a/468031/120853.
% \newfontfamily is used similarly to \setmainfont etc,
% see: https://tex.stackexchange.com/a/12568/120853
\newfontfamily{\unitnumberfont}[
    % New font family for typesetting units.
    % Required since otherwise, numbers typeset with \qty/\num etc. from siunitx
    % might be hanging if that feature is turned on in the main font (OldStyle numbers).
    % To ensure these physical numbers are always upright, set Numbers:
    Numbers=Uppercase,
    % Proper scaling for consistency with main text
    Scale=MatchLowercase,
]{Libertinus Serif}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Special Symbols and Icons
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\RequirePackage{fontawesome5}% High-quality Unicode vector web symbols

\endinput
